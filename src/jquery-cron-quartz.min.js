!function(a){"use strict";function d(a,b){var d,e,c="";for(d=0;d<a.length;d++)e=a[d],null!=b&&(e=b[d]),c+="<option value='"+e+"'>"+a[d]+"</option>\n";return c}function e(a,b,c){var e,f,d="";for(f=a;b>=f;f++)e=c&&10>f?"0"+f:f,d+="<option value='"+f+"'>"+e+"</option>\n";return d}function f(c,d,e,f){a(b[e].container).addClass(d.tag).appendTo(c),c.children("."+d.tag).append(d.inputs),"function"==typeof f&&f()}var b=a.fn.cronInputs={en:{period:'<div class="cron-select-period"><label></label><select class="cron-period-select"></select></div>',startTime:'<div class="cron-input cron-start-time">Start time <select class="cron-clock-hour"></select>:<select class="cron-clock-minute"></select>:<select class="cron-clock-second"></select></div>',container:'<div class="cron-input"></div>',seconds:{tag:"cron-seconds",inputs:['<p>Every <select class="cron-seconds-select"></select> seconds(s)</p>']},minutes:{tag:"cron-minutes",inputs:['<p>Every <select class="cron-minutes-select"></select> minutes(s)</p>']},hourly:{tag:"cron-hourly",inputs:['<p><input type="radio" name="hourlyType" value="every"> Every <select class="cron-hourly-select"></select> hour(s)</p>','<p><input type="radio" name="hourlyType" value="clock"> Every day at <select class="cron-hourly-hour"></select>:<select class="cron-hourly-minute"></select>:<select class="cron-hourly-second"></select></p>']},daily:{tag:"cron-daily",inputs:['<p><input type="radio" name="dailyType" value="every"> Every <select class="cron-daily-select"></select> day(s)</p>','<p><input type="radio" name="dailyType" value="clock"> Every week day</p>']},weekly:{tag:"cron-weekly",inputs:['<p><input type="checkbox" name="dayOfWeekMon"> Monday  <input type="checkbox" name="dayOfWeekTue"> Tuesday  <input type="checkbox" name="dayOfWeekWed"> Wednesday  <input type="checkbox" name="dayOfWeekThu"> Thursday</p>','<p><input type="checkbox" name="dayOfWeekFri"> Friday  <input type="checkbox" name="dayOfWeekSat"> Saturday  <input type="checkbox" name="dayOfWeekSun"> Sunday</p>']},monthly:{tag:"cron-monthly",inputs:['<p><input type="radio" name="monthlyType" value="byDay"> Day <select class="cron-monthly-day"></select> of every <select class="cron-monthly-month"></select> month(s)</p>','<p><input type="radio" name="monthlyType" value="byWeek"> The <select class="cron-monthly-nth-day"></select> <select class="cron-monthly-day-of-week"></select> of every <select class="cron-monthly-month-by-week"></select> month(s)</p>']},yearly:{tag:"cron-yearly",inputs:['<p><input type="radio" name="yearlyType" value="byDay"> Every <select class="cron-yearly-month"></select> <select class="cron-yearly-day"></select></p>','<p><input type="radio" name="yearlyType" value="byWeek"> The <select class="cron-yearly-nth-day"></select> <select class="cron-yearly-day-of-week"></select> of <select class="cron-yearly-month-by-week"></select></p>']}}},c=a.fn.optsText={en:{periodOpts:["Seconds","Minutes","Hourly","Daily","Weekly","Monthly","Yearly"],monthOpts:["January","February","March","April","May","June","July","August","September","October","November","December"],nthWeekOpts:["First","Second","Third","Forth"],dayOfWeekOpts:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]}},g={periodSelect:function(){var d,e,f,g,b=a(this).val(),c=a(this).parent();switch(c.siblings("div.cron-input").hide(),c.siblings().find("select option").removeAttr("selected"),c.siblings().find("select option:first").attr("selected","selected"),c.siblings("div.cron-start-time").show(),c.siblings("div.cron-start-time").children("select.cron-clock-hour").val("12"),b){case"Seconds":c.siblings("div.cron-seconds").show().find("select.cron-seconds-select").val("1"),c.siblings("div.cron-start-time").hide();break;case"Minutes":c.siblings("div.cron-minutes").show().find("select.cron-minutes-select").val("1"),c.siblings("div.cron-start-time").hide();break;case"Hourly":d=c.siblings("div.cron-hourly"),d.show().find("input[name=hourlyType][value=every]").prop("checked",!0),d.find("select.cron-hourly-hour").val("12"),c.siblings("div.cron-start-time").hide();break;case"Daily":e=c.siblings("div.cron-daily"),e.show().find("input[name=dailyType][value=every]").prop("checked",!0);break;case"Weekly":c.siblings("div.cron-weekly").show().find("input[type=checkbox]").prop("checked",!1);break;case"Monthly":f=c.siblings("div.cron-monthly"),f.show().find("input[name=monthlyType][value=byDay]").prop("checked",!0);break;case"Yearly":g=c.siblings("div.cron-yearly"),g.show().find("input[name=yearlyType][value=byDay]").prop("checked",!0)}}};a.cronBuilder=function(h,i){var j=this;j.$el=a(h),j.el=h,j.$el.data("cronBuilder",j),j.init=function(){var h,k,l,m,n,o,p,q,r,s,t,u,v;j.options=a.extend({},a.cronBuilder.defaultOptions,i),h=d(c[j.options.language].periodOpts,["Seconds","Minutes","Hourly","Daily","Weekly","Monthly","Yearly"]),k=e(1,60),l=e(1,60),m=e(1,24),n=e(1,100),o=e(0,59,!0),p=e(0,59,!0),q=e(0,23,!0),r=e(1,31),s=d(c[j.options.language].monthOpts,[1,2,3,4,5,6,7,8,9,10,11,12]),t=e(1,12),u=d(c[j.options.language].nthWeekOpts,[1,2,3,4]),v=d(c[j.options.language].dayOfWeekOpts,["MON","TUE","WED","THU","FRI","SAT","SUN"]),j.$el.append(b[j.options.language].period),j.$el.find("div.cron-select-period label").text(j.options.selectorLabel),j.$el.find("select.cron-period-select").append(h).bind("change",g.periodSelect),f(j.$el,b[j.options.language].seconds,j.options.language,function(){j.$el.find("select.cron-seconds-select").append(k)}),f(j.$el,b[j.options.language].minutes,j.options.language,function(){j.$el.find("select.cron-minutes-select").append(l)}),f(j.$el,b[j.options.language].hourly,j.options.language,function(){j.$el.find("select.cron-hourly-select").append(m),j.$el.find("select.cron-hourly-hour").append(q),j.$el.find("select.cron-hourly-minute").append(p),j.$el.find("select.cron-hourly-second").append(o)}),f(j.$el,b[j.options.language].daily,j.options.language,function(){j.$el.find("select.cron-daily-select").append(n)}),f(j.$el,b[j.options.language].weekly,j.options.language),f(j.$el,b[j.options.language].monthly,j.options.language,function(){j.$el.find("select.cron-monthly-day").append(r),j.$el.find("select.cron-monthly-month").append(t),j.$el.find("select.cron-monthly-nth-day").append(u),j.$el.find("select.cron-monthly-day-of-week").append(v),j.$el.find("select.cron-monthly-month-by-week").append(t)}),f(j.$el,b[j.options.language].yearly,j.options.language,function(){j.$el.find("select.cron-yearly-month").append(s),j.$el.find("select.cron-yearly-day").append(r),j.$el.find("select.cron-yearly-nth-day").append(u),j.$el.find("select.cron-yearly-day-of-week").append(v),j.$el.find("select.cron-yearly-month-by-week").append(s)}),j.$el.append(b[j.options.language].startTime),j.$el.find("select.cron-clock-hour").append(q),j.$el.find("select.cron-clock-minute").append(p),j.$el.find("select.cron-clock-second").append(o),"function"==typeof j.options.onChange&&j.$el.find("select, input").change(function(){j.options.onChange(j.getExpression())}),j.$el.find("select.cron-period-select").triggerHandler("change")},j.getExpression=function(){var f,g,h,i,k,l,m,n,o,p,a=0,b="*",c="?",d="*",e="*";switch(a=j.$el.find("select.cron-clock-second").val(),f=j.$el.find("select.cron-clock-minute").val(),g=j.$el.find("select.cron-clock-hour").val(),h=j.$el.find("select.cron-period-select").val()){case"Seconds":i=j.$el.find("div.cron-seconds"),k=i.find("select.cron-seconds-select").val(),a=k>1?"0/"+k:"*",f="*",g="*";break;case"Minutes":i=j.$el.find("div.cron-minutes"),l=i.find("select.cron-minutes-select").val(),f=l>1?"0/"+l:"*",g="*";break;case"Hourly":i=j.$el.find("div.cron-hourly"),i.find("input[name=hourlyType][value=every]").is(":checked")?(f=0,g="*",m=i.find("select.cron-hourly-select").val(),m>1&&(g="0/"+m)):(a=i.find("select.cron-hourly-second").val(),f=i.find("select.cron-hourly-minute").val(),g=i.find("select.cron-hourly-hour").val());break;case"Daily":i=j.$el.find("div.cron-daily"),i.find("input[name=dailyType][value=every]").is(":checked")?(n=i.find("select.cron-daily-select").val(),n>1&&(e="1/"+n)):(e="?",c="MON-FRI");break;case"Weekly":i=j.$el.find("div.cron-weekly"),o=[],i.find("input[name=dayOfWeekMon]").is(":checked")&&o.push("MON"),i.find("input[name=dayOfWeekTue]").is(":checked")&&o.push("TUE"),i.find("input[name=dayOfWeekWed]").is(":checked")&&o.push("WED"),i.find("input[name=dayOfWeekThu]").is(":checked")&&o.push("THU"),i.find("input[name=dayOfWeekFri]").is(":checked")&&o.push("FRI"),i.find("input[name=dayOfWeekSat]").is(":checked")&&o.push("SAT"),i.find("input[name=dayOfWeekSun]").is(":checked")&&o.push("SUN"),c="*",e="?",o.length<7&&o.length>0&&(c=o.join(","));break;case"Monthly":i=j.$el.find("div.cron-monthly"),i.find("input[name=monthlyType][value=byDay]").is(":checked")?(d="*",p=i.find("select.cron-monthly-month").val(),e=i.find("select.cron-monthly-day").val(),c="?"):(c=i.find("select.cron-monthly-day-of-week").val()+"#"+i.find("select.cron-monthly-nth-day").val(),p=i.find("select.cron-monthly-month-by-week").val(),e="?"),p>1&&(d="1/"+p);break;case"Yearly":i=j.$el.find("div.cron-yearly"),i.find("input[name=yearlyType][value=byDay]").is(":checked")?(e=i.find("select.cron-yearly-day").val(),d=i.find("select.cron-yearly-month").val(),c="?"):(c=i.find("select.cron-yearly-day-of-week").val()+"#"+i.find("select.cron-yearly-nth-day").val(),d=i.find("select.cron-yearly-month-by-week").val(),e="?")}return[a,f,g,e,d,c,b].join(" ")},j.init()},a.cronBuilder.defaultOptions={selectorLabel:"Select period: ",language:"en"},a.fn.cronBuilder=function(b){return this.each(function(){new a.cronBuilder(this,b)})}}(jQuery);
